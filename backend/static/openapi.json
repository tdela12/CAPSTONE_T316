{"openapi":"3.0.3","info":{"title":"AutoGuru â€” Service Price Prediction API","description":"Predict prices for capped, logbook, prescribed and repair services. Interactive docs (Swagger) are available at /docs.","version":"1.0.0"},"paths":{"/predict":{"post":{"tags":["Prediction"],"summary":"Predict a service price","operationId":"predict_predict_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictRequest"}}},"required":true},"responses":{"200":{"description":"Prediction successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictResponse"}}}},"400":{"description":"Invalid request or unknown model","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"code":400,"message":"Unknown model: FooBar","details":{"model_name":"FooBar"}}}}},"422":{"description":"Validation error in input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"code":422,"message":"Input validation error","details":[{"loc":["body","features","Months"],"msg":"field required","type":"value_error.missing"}]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"code":500,"message":"An unexpected error occurred","details":{"trace_id":"123e4567-e89b-12d3-a456-426614174000"}}}}}}}},"/historical_summary":{"post":{"tags":["Historical"],"summary":"Get historical data","operationId":"get_historical_data_historical_summary_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoricalRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoricalResponse"}}}},"400":{"description":"Invalid request or unknown model","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"code":400,"message":"Unknown model: FooBar","details":{"model_name":"FooBar"}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"code":500,"message":"An unexpected error occurred","details":{"trace_id":"123e4567-e89b-12d3-a456-426614174000"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CarFeatures":{"properties":{"TaskName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Taskname","description":"Name of the task/service (e.g., Wheel alignment, Brake service)"},"Make":{"type":"string","title":"Make","description":"Vehicle manufacturer (e.g., Toyota)"},"Model":{"type":"string","title":"Model","description":"Vehicle model (e.g., Corolla)"},"Year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year","description":"Year of manufacture"},"FuelType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fueltype","description":"Fuel type (e.g., Petrol, Diesel, Hybrid)"},"Transmission":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transmission","description":"Transmission type (e.g., Auto, Manual)"},"EngineSize":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Enginesize","description":"Engine displacement in litres"},"DriveType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Drivetype","description":"Drive type (e.g., FWD, RWD, AWD)"},"Distance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance","description":"Vehicle odometer reading (km)"},"Months":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Months","description":"Months since service or warranty (if applicable)"},"AdjustedPrice":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Adjustedprice","description":"Historical adjusted price (optional)"}},"type":"object","required":["TaskName","Make","Model"],"title":"CarFeatures"},"ComparisonResult":{"properties":{"predicted_price":{"type":"number","title":"Predicted Price"},"mean":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Mean"},"median":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Median"},"iqr_low":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iqr Low"},"iqr_high":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iqr High"},"within_iqr":{"type":"boolean","title":"Within Iqr"},"z_from_median":{"type":"number","title":"Z From Median"},"confidence":{"type":"string","title":"Confidence"},"percentile":{"type":"number","title":"Percentile"}},"type":"object","required":["predicted_price","mean","median","iqr_low","iqr_high","within_iqr","z_from_median","confidence","percentile"],"title":"ComparisonResult"},"ErrorResponse":{"properties":{"code":{"type":"integer","title":"Code"},"message":{"type":"string","title":"Message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["code","message"],"title":"ErrorResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoricalPlotOutputs":{"properties":{"boxplot_png":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Boxplot Png","description":"Base64 PNG of boxplot (if applicable)"},"histogram_png":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Histogram Png","description":"Base64 PNG of histogram (if applicable)"},"month_vs_price_png":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Month Vs Price Png","description":"Base64 PNG of Months vs Price scatter"},"distance_vs_price_png":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Distance Vs Price Png","description":"Base64 PNG of Distance vs Price scatter"}},"type":"object","title":"HistoricalPlotOutputs"},"HistoricalRequest":{"properties":{"model_name":{"type":"string","title":"Model Name","description":"Which model to use: one of Capped, Logbook, Prescribed, Repair"},"features":{"$ref":"#/components/schemas/CarFeatures","description":"Vehicle / Task feature object"},"prediction":{"type":"number","title":"Prediction","description":"Predicted price from /predict endpoint"},"months":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Months","description":"Months of service (if applicable)"},"distance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance","description":"Vehicle odometer reading (km)"}},"type":"object","required":["model_name","features","prediction"],"title":"HistoricalRequest"},"HistoricalResponse":{"properties":{"summary":{"anyOf":[{"$ref":"#/components/schemas/SummaryResult"},{"type":"null"}]},"comparison":{"anyOf":[{"$ref":"#/components/schemas/ComparisonResult"},{"type":"null"}]},"plots":{"$ref":"#/components/schemas/HistoricalPlotOutputs"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["plots"],"title":"HistoricalResponse"},"PredictPlotOutputs":{"properties":{"shap_png":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shap Png","description":"Base64 PNG of SHAP waterfall plot"}},"type":"object","title":"PredictPlotOutputs"},"PredictRequest":{"properties":{"model_name":{"type":"string","title":"Model Name","description":"Which model to use: one of Capped, Logbook, Prescribed, Repair"},"features":{"$ref":"#/components/schemas/CarFeatures","description":"Vehicle / Task feature object"}},"type":"object","required":["model_name","features"],"title":"PredictRequest"},"PredictResponse":{"properties":{"model":{"type":"string","title":"Model"},"prediction":{"type":"number","title":"Prediction"},"features":{"additionalProperties":true,"type":"object","title":"Features"},"plots":{"$ref":"#/components/schemas/PredictPlotOutputs"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["model","prediction","features","plots"],"title":"PredictResponse"},"SummaryResult":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max"},"median":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Median"},"iqr_low":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iqr Low"},"iqr_high":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iqr High"}},"type":"object","required":["min","max","median","iqr_low","iqr_high"],"title":"SummaryResult"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}